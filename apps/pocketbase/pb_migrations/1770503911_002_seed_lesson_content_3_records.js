/// <reference path="../pb_data/types.d.ts" />
migrate((app) => {
  const collection = app.findCollectionByNameOrId("lesson_content");

  const record0 = new Record(collection);
    record0.set("lesson_id", "pbc_3963162141_6");
    record0.set("content_body", "# Tax Compliance and Accounting Standards\n\n## Section 1: Tax Compliance for Leases\n\n### True Lease Classification\n- IRS true lease test determines tax treatment\n- Lessor retains ownership for tax purposes\n- Lessee cannot claim depreciation\n- Example: Equipment lease classified as true lease\n\n### IRS True Lease Test\n- Lessor must have equity investment\n- Lessor must have profit motive\n- Lessor must retain residual value risk\n- Example: Lessor meets all true lease requirements\n\n### Tax Deductions for Lessees\n- Lease payments are tax deductible\n- Reduces taxable income\n- Example: $20K monthly payment deductible\n\n### Tax Deductions for Lessors\n- Depreciation is tax deductible\n- Interest is tax deductible\n- Example: Depreciation and interest deductions\n\n### Tax Compliance Documentation\n- Maintain lease documentation\n- Document true lease classification\n- Example: Lease file contains tax documentation\n\n## Section 2: ASC 842 Accounting Standard\n\n### Lease Classification\n- Operating lease: Short-term, lessor retains risks\n- Finance lease: Long-term, lessee assumes risks\n- Example: 5-year lease classified as finance lease\n\n### Lessee Accounting\n- Recognize right-of-use (ROU) asset\n- Recognize lease liability\n- Example: $1M ROU asset and liability recognized\n\n### Lessor Accounting\n- Operating lease: Lessor retains asset\n- Finance lease: Lessor derecognizes asset\n- Example: Finance lease asset derecognized\n\n### Disclosure Requirements\n- Disclose lease terms and conditions\n- Disclose payment obligations\n- Example: Lease disclosures in financial statements\n\n## Section 3: IFRS 16 Accounting Standard\n\n### Lease Recognition\n- Recognize right-of-use asset\n- Recognize lease liability\n- Example: ROU asset and liability recognized\n\n### Measurement\n- Measure ROU asset at cost\n- Measure lease liability at present value\n- Example: Lease liability measured at PV of payments\n\n### Subsequent Measurement\n- Depreciate ROU asset\n- Accrete lease liability\n- Example: ROU asset depreciated over lease term\n\n### Disclosure Requirements\n- Disclose lease terms and conditions\n- Disclose payment obligations\n- Example: Lease disclosures in financial statements\n\n## Section 4: Compliance Procedures\n\n### Procedure 1: Tax Classification\n- Determine true lease status\n- Document classification\n- Example: True lease classification documented\n\n### Procedure 2: Accounting Treatment\n- Determine lease classification (ASC 842 or IFRS 16)\n- Record lease in accounting system\n- Example: Finance lease recorded with ROU asset\n\n### Procedure 3: Disclosure Preparation\n- Prepare lease disclosures\n- Include in financial statements\n- Example: Lease disclosures included in notes\n\n### Procedure 4: Monitoring and Compliance\n- Monitor lease accounting\n- Ensure compliance with standards\n- Example: Quarterly lease accounting review\n\n## Section 5: Case Study - Tax and Accounting Compliance\n\n### Company: TaxAccountingCorp\nEquipment: $1M manufacturing equipment\n\n### Tax Compliance\n- True lease classification: Meets IRS test\n- Lessor deductions: Depreciation and interest\n- Lessee deductions: Lease payments\n- Documentation: Complete tax file\n\n### ASC 842 Accounting\n- Classification: Finance lease\n- ROU asset: $1M recognized\n- Lease liability: $900K recognized\n- Disclosures: Included in financial statements\n\n### IFRS 16 Accounting\n- ROU asset: $1M recognized\n- Lease liability: $900K recognized\n- Depreciation: $200K/year\n- Disclosures: Included in financial statements\n\n### Compliance Status\n- Tax classification correct\n- Accounting treatment correct\n- Disclosures complete\n- No compliance issues\n\n### Outcome\n- Comprehensive tax and accounting compliance\n- Proper lease classification\n- Correct accounting treatment\n- Financial statement disclosures complete");
  app.save(record0);

  const record1 = new Record(collection);
    record1.set("lesson_id", "pbc_3963162141_7");
    record1.set("content_body", "# Default, Remedies, and Dispute Resolution\n\n## Section 1: Default Provisions\n\n### Payment Default\n- Failure to make lease payment\n- Typically 10-15 days late\n- Triggers notice and cure period\n- Example: Payment 15 days late constitutes default\n\n### Non-Payment Default\n- Breach of other lease obligations\n- Examples: Failure to maintain insurance, unauthorized use\n- May trigger immediate remedies\n- Example: Failure to maintain required insurance\n\n### Material Breach\n- Significant violation of lease terms\n- May not be curable\n- Triggers immediate remedies\n- Example: Unauthorized sale of equipment\n\n### Notice and Cure\n- Lessor provides notice of default\n- Lessee has cure period (typically 10-30 days)\n- Lessee may cure to avoid remedies\n- Example: 10-day notice and cure period\n\n## Section 2: Lessor Remedies\n\n### Repossession\n- Lessor may repossess equipment\n- May occur without court order (self-help)\n- Must comply with state law\n- Example: Lessor repossesses equipment upon default\n\n### Acceleration\n- Lessor may accelerate remaining payments\n- Lessee must pay all remaining payments\n- Example: Remaining $600K payments accelerated\n\n### Damages\n- Lessor may claim damages\n- May include lost profits, repair costs\n- Example: Lessor claims $50K in damages\n\n### Specific Performance\n- Court may order lessee to perform\n- Lessee must comply with lease terms\n- Example: Court orders lessee to maintain insurance\n\n## Section 3: Lessee Remedies\n\n### Lessor Breach\n- Lessor fails to perform obligations\n- Lessee may have remedies\n- Example: Lessor fails to maintain equipment\n\n### Lessee Remedies\n- Repair and deduct: Repair and deduct from payments\n- Withhold payment: Withhold payment for breach\n- Terminate lease: Terminate lease for material breach\n- Example: Lessee withholds payment for lessor breach\n\n## Section 4: Dispute Resolution\n\n### Negotiation\n- Parties attempt to resolve dispute\n- May result in settlement\n- Example: Parties negotiate payment plan\n\n### Mediation\n- Neutral third party assists resolution\n- Non-binding process\n- Example: Mediator helps parties reach agreement\n\n### Arbitration\n- Neutral arbitrator hears dispute\n- Binding decision\n- Example: Arbitrator decides dispute\n\n### Litigation\n- Court resolves dispute\n- Formal legal process\n- Example: Court decides lease dispute\n\n## Section 5: Case Study - Default and Remedies\n\n### Company: DefaultCorp\nEquipment: $1M manufacturing equipment\n\n### Default Scenario\n- Lessee fails to make payment\n- Payment 20 days late\n- Lessor provides 10-day notice and cure period\n- Lessee fails to cure\n\n### Lessor Remedies\n- Repossession: Equipment repossessed\n- Acceleration: Remaining $600K payments accelerated\n- Damages: $50K damages claimed\n- Total recovery: $650K\n\n### Dispute Resolution\n- Lessee disputes damages claim\n- Parties attempt negotiation\n- Negotiation fails\n- Arbitration initiated\n\n### Arbitration Outcome\n- Arbitrator awards $40K damages\n- Lessor recovers equipment and $40K\n- Lessee pays $40K damages\n- Dispute resolved\n\n### Outcome\n- Default remedies applied\n- Dispute resolved through arbitration\n- Lessor recovery achieved\n- Lease terminated");
  app.save(record1);

  const record2 = new Record(collection);
    record2.set("lesson_id", "pbc_3963162141_8");
    record2.set("content_body", "# Compliance Audits and Best Practices\n\n## Section 1: Compliance Audit Process\n\n### Audit Planning\n- Identify audit scope\n- Develop audit plan\n- Example: Annual compliance audit plan\n\n### Audit Procedures\n- Test compliance with regulations\n- Review lease files\n- Test disclosures\n- Example: Test 50 lease files for compliance\n\n### Audit Testing\n- Test for TILA compliance\n- Test for ECOA compliance\n- Test for FCRA compliance\n- Example: Test disclosure compliance\n\n### Audit Findings\n- Identify compliance violations\n- Document findings\n- Example: 5 disclosure violations identified\n\n### Audit Report\n- Document findings and recommendations\n- Provide corrective action plan\n- Example: Audit report with recommendations\n\n## Section 2: Compliance Best Practices\n\n### Best Practice 1: Written Policies\n- Develop written compliance policies\n- Document procedures\n- Example: Written lease origination procedures\n\n### Best Practice 2: Staff Training\n- Train staff on compliance requirements\n- Provide regular training\n- Example: Annual compliance training\n\n### Best Practice 3: Monitoring and Testing\n- Monitor compliance regularly\n- Test for violations\n- Example: Quarterly compliance testing\n\n### Best Practice 4: Documentation\n- Maintain complete lease files\n- Document compliance\n- Example: Complete lease file documentation\n\n### Best Practice 5: Corrective Action\n- Address violations promptly\n- Implement corrective measures\n- Example: Correct disclosure errors\n\n## Section 3: Compliance Culture\n\n### Leadership Commitment\n- Leadership supports compliance\n- Allocates resources\n- Example: CEO commits to compliance\n\n### Staff Accountability\n- Staff responsible for compliance\n- Performance evaluated on compliance\n- Example: Compliance metrics in performance reviews\n\n### Continuous Improvement\n- Regularly review and improve processes\n- Implement new procedures\n- Example: Annual process improvement review\n\n## Section 4: Case Study - Compliance Audit and Best Practices\n\n### Company: ComplianceAuditCorp\nLease Program: Consumer equipment leases\n\n### Audit Scope\n- 50 lease files tested\n- TILA, ECOA, FCRA compliance tested\n- Disclosure and documentation reviewed\n\n### Audit Findings\n- 5 TILA disclosure violations\n- 2 ECOA documentation violations\n- 1 FCRA adverse action notice violation\n- 92% compliance rate\n\n### Corrective Actions\n- Retrain staff on TILA requirements\n- Implement disclosure checklist\n- Implement adverse action notice procedure\n- Retest 50 files\n\n### Compliance Best Practices\n- Written policies: Comprehensive compliance manual\n- Training: Quarterly compliance training\n- Monitoring: Monthly compliance testing\n- Documentation: Complete lease files\n- Corrective action: Prompt violation correction\n\n### Compliance Culture\n- Leadership commitment: CEO supports compliance\n- Staff accountability: Compliance in performance reviews\n- Continuous improvement: Annual process review\n\n### Outcome\n- Audit completed successfully\n- Violations identified and corrected\n- Compliance best practices implemented\n- Compliance culture established");
  app.save(record2);
}, (app) => {
  // Rollback: record IDs not known, manual cleanup needed
})
