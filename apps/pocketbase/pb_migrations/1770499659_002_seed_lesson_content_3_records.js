/// <reference path="../pb_data/types.d.ts" />
migrate((app) => {
  const collection = app.findCollectionByNameOrId("lesson_content");

  const record0 = new Record(collection);
    record0.set("lesson_id", "pbc_lesson_6");
    record0.set("content_body", "# ASC 840 vs. ASC 842\n\n## Section 1: Similarities Between ASC 840 and ASC 842\n\n### Core Similarities:\n\n**1. Lease Definition:**\n- Both define lease similarly\n- Contract conveying right to use asset\n- For period of time\n\n**2. Lease Classification (Lessor):**\n- Both classify leases as finance or operating\n- Both use similar classification criteria\n- Example: 5-year lease of 7-year asset = finance lease\n\n**3. Finance Lease Accounting (Lessor):**\n- Both recognize lease receivable\n- Both recognize finance income\n- Example: $500K equipment = $500K lease receivable\n\n**4. Operating Lease Accounting (Lessor):**\n- Both retain underlying asset\n- Both recognize lease income\n- Example: $10K/month = $120K/year lease income\n\n**5. Lease Term Definition:**\n- Both include non-cancellable period\n- Both include renewal periods (if reasonably certain)\n- Example: 5-year lease + 2-year renewal = 7-year term\n\n## Section 2: Key Differences Between ASC 840 and ASC 842\n\n### Difference 1: Lessee Accounting Model\n\n**ASC 840:**\n- Dual model: Finance vs. operating leases\n- Finance leases: On balance sheet (asset + liability)\n- Operating leases: Off balance sheet (expense only)\n\n**ASC 842:**\n- Single model: All leases on balance sheet\n- All leases: ROU asset + lease liability\n\n**Impact:**\n- ASC 842 brings operating leases onto balance sheet\n- Increases total assets and liabilities\n\n### Difference 2: Operating Lease Accounting\n\n**ASC 840:**\n- Operating leases: Lease expense recognized straight-line\n- No asset or liability recognized\n\n**ASC 842:**\n- Operating leases: ROU asset and lease liability recognized\n- Depreciation + interest expense recognized\n\n**Impact:**\n- ASC 842 requires balance sheet recognition\n- Changes financial ratios\n\n### Difference 3: Discount Rate Selection\n\n**ASC 840:**\n- Limited guidance on discount rate\n- Implicit rate used when available\n\n**ASC 842:**\n- Implicit rate if known\n- Incremental borrowing rate if implicit rate unknown\n\n**Impact:**\n- ASC 842 more prescriptive\n- Clearer discount rate selection\n\n### Difference 4: Lease Modifications\n\n**ASC 840:**\n- Limited guidance on modifications\n- Treated as new lease or adjustment\n\n**ASC 842:**\n- Comprehensive guidance on modifications\n- Remeasure if modification is not anticipated\n\n**Impact:**\n- ASC 842 more prescriptive\n- Clearer accounting treatment\n\n### Difference 5: Transition Approach\n\n**ASC 840:**\n- Full retrospective or modified retrospective\n- Restate prior periods (full retrospective)\n\n**ASC 842:**\n- Modified retrospective only (no restatement)\n- Cumulative effect adjustment\n\n**Impact:**\n- ASC 842 simpler transition\n- No need to restate prior periods\n\n## Section 3: Case Study - ASC 840 vs. ASC 842\n\n### Company: USCorp\n\n### Lease Portfolio (ASC 840):\n\n**Finance Leases:**\n- 10 finance leases\n- Total assets: $10M\n- Total liabilities: $8M\n- Annual lease expense: $1.5M\n\n**Operating Leases:**\n- 50 operating leases\n- Total lease payments: $50M\n- Off-balance sheet\n- Annual lease expense: $5M\n\n**Total Lease Expense (ASC 840): $6.5M**\n\n### Transition to ASC 842:\n\n**Finance Leases (Unchanged):**\n- 10 finance leases\n- Total ROU assets: $10M\n- Total lease liabilities: $8M\n- Annual lease expense: $1.5M\n\n**Operating Leases (Now on Balance Sheet):**\n- 50 operating leases\n- Total ROU assets: $45M\n- Total lease liabilities: $40M\n- Annual lease expense: $5.2M\n\n**Total Lease Expense (ASC 842): $6.7M**\n\n### Financial Statement Impact:\n\n**Balance Sheet (Transition Date):**\n- Total assets increase: $45M\n- Total liabilities increase: $40M\n- Equity impact: $5M\n\n**Income Statement (Year 1):**\n- Lease expense increases: $6.5M to $6.7M\n- Net income impact: -$0.2M\n\n**Financial Ratios:**\n\n**Debt-to-Equity Ratio:**\n- ASC 840: 0.5 ($40M debt / $80M equity)\n- ASC 842: 0.6 ($80M debt / $120M equity)\n- Impact: Ratio increases 20%");
  app.save(record0);

  const record1 = new Record(collection);
    record1.set("lesson_id", "pbc_lesson_7");
    record1.set("content_body", "# ASC 842 Implementation in US\n\n## Section 1: ASC 842 Adoption Timeline in US\n\n### Public Companies:\n\n**Effective Date: January 1, 2019**\n- All public companies required to adopt\n- SEC registrants must comply\n- Example: Fortune 500 companies\n\n**Implementation Timeline:**\n- 2018: Preparation and planning\n- 2019: Adoption and transition\n- 2019-2020: Full implementation\n\n### Private Companies:\n\n**Effective Date: January 1, 2022**\n- All private companies required to adopt\n- 3-year delay from public companies\n- Example: Private equity-backed companies\n\n**Implementation Timeline:**\n- 2021: Preparation and planning\n- 2022: Adoption and transition\n- 2022-2023: Full implementation\n\n## Section 2: Public Company Implementation\n\n### Public Company Challenges:\n\n**1. Lease Identification:**\n- Identifying all leases in organization\n- Distinguishing leases from service contracts\n- Example: 1,000+ potential leases\n\n**2. Lease Valuation:**\n- Determining lease term\n- Selecting appropriate discount rate\n- Example: Implicit rate unknown\n\n**3. System Implementation:**\n- Updating accounting systems\n- Integrating lease data\n- Example: Legacy systems not equipped\n\n**4. Disclosure Requirements:**\n- Comprehensive disclosures required\n- Complex disclosure schedules\n- Example: Detailed lease payment schedules\n\n**5. Audit and Compliance:**\n- Audit procedures for leases\n- Internal controls over lease accounting\n- Example: SOX compliance\n\n### Public Company Solutions:\n\n**1. Lease Accounting Software:**\n- Specialized lease accounting platforms\n- Automated calculations\n- Example: Lease accounting software vendors\n\n**2. Lease Valuation Tools:**\n- Incremental borrowing rate determination\n- Lease term analysis\n- Example: Valuation tools and templates\n\n**3. System Integration:**\n- ERP system updates\n- Lease data integration\n- Example: SAP, Oracle, NetSuite integration\n\n**4. Disclosure Templates:**\n- Standardized disclosure formats\n- Automated disclosure generation\n- Example: Disclosure templates\n\n**5. Audit Procedures:**\n- Lease identification procedures\n- Lease valuation procedures\n- Example: Audit procedures and checklists\n\n## Section 3: Private Company Implementation\n\n### Private Company Considerations:\n\n**1. Smaller Lease Portfolios:**\n- Fewer leases than public companies\n- Simpler lease arrangements\n- Example: 100-500 leases\n\n**2. Limited Resources:**\n- Smaller accounting teams\n- Limited IT resources\n- Example: Manual processes\n\n**3. Practical Expedients:**\n- More practical expedients available\n- Simplified accounting approaches\n- Example: Hindsight practical expedient\n\n**4. Disclosure Requirements:**\n- Simplified disclosures for private companies\n- Less detailed schedules\n- Example: Reduced disclosure burden\n\n**5. Audit Considerations:**\n- Smaller audit teams\n- Limited audit resources\n- Example: Streamlined audit procedures\n\n### Private Company Solutions:\n\n**1. Simplified Lease Accounting:**\n- Practical expedients available\n- Simplified calculations\n- Example: Hindsight practical expedient\n\n**2. Manual Processes:**\n- Spreadsheet-based tracking\n- Manual calculations\n- Example: Excel-based lease tracking\n\n**3. Outsourced Services:**\n- Outsource lease accounting\n- Third-party service providers\n- Example: Accounting firms providing lease services\n\n**4. Simplified Disclosures:**\n- Reduced disclosure requirements\n- Simplified formats\n- Example: Simplified disclosure templates\n\n**5. Audit Procedures:**\n- Streamlined audit procedures\n- Limited audit scope\n- Example: Focused audit procedures\n\n## Section 4: Case Study - ASC 842 Implementation\n\n### Company: USImplementationCorp\n\n### Public Company Division:\n\n**Lease Portfolio:**\n- 500 leases\n- Total ROU assets: $250M\n- Total lease liabilities: $225M\n- Implementation timeline: 2019\n\n**Implementation Approach:**\n- Lease accounting software\n- System integration\n- Comprehensive disclosures\n- Audit procedures\n\n**Financial Statement Impact:**\n- Total assets increase: $250M\n- Total liabilities increase: $225M\n- Equity impact: $25M\n\n### Private Company Division:\n\n**Lease Portfolio:**\n- 200 leases\n- Total ROU assets: $100M\n- Total lease liabilities: $90M\n- Implementation timeline: 2022\n\n**Implementation Approach:**\n- Simplified lease accounting\n- Manual processes\n- Reduced disclosures\n- Streamlined audit procedures\n\n**Financial Statement Impact:**\n- Total assets increase: $100M\n- Total liabilities increase: $90M\n- Equity impact: $10M\n\n### Consolidated Impact:\n\n**Total Leases: 700**\n**Total ROU Assets: $350M**\n**Total Lease Liabilities: $315M**\n**Implementation Timeline: 2019-2022**");
  app.save(record1);

  const record2 = new Record(collection);
    record2.set("lesson_id", "pbc_lesson_8");
    record2.set("content_body", "# US GAAP Specific Considerations\n\n## Section 1: SEC Requirements for Public Companies\n\n### SEC Disclosure Requirements:\n\n**Form 10-K Disclosures:**\n- Lease accounting policies\n- Lease payment schedules\n- ROU asset and liability disclosures\n- Example: Detailed lease disclosures in 10-K\n\n**Form 10-Q Disclosures:**\n- Quarterly lease disclosures\n- Updated lease payment schedules\n- Example: Quarterly lease updates\n\n**MD&A Disclosures:**\n- Management discussion of lease impacts\n- Significant lease transactions\n- Example: Discussion of lease strategy\n\n## Section 2: US GAAP Specific Issues\n\n### Issue 1: Lease vs. Service Contract Distinction\n\n**Challenge:**\n- Distinguishing leases from service contracts\n- Determining control of asset\n- Example: Cloud computing arrangements\n\n**Solution:**\n- ASC 842 guidance on lease definition\n- Control assessment framework\n- Example: Lease vs. service contract analysis\n\n### Issue 2: Incremental Borrowing Rate Determination\n\n**Challenge:**\n- Determining incremental borrowing rate\n- Lack of implicit rate information\n- Example: Implicit rate unknown\n\n**Solution:**\n- ASC 842 guidance on incremental borrowing rate\n- Determination methodology\n- Example: Incremental borrowing rate calculation\n\n### Issue 3: Lease Term Determination\n\n**Challenge:**\n- Determining lease term\n- Assessing renewal options\n- Example: Renewal options with uncertain exercise\n\n**Solution:**\n- ASC 842 guidance on lease term\n- Reasonably certain assessment\n- Example: Lease term determination\n\n### Issue 4: Lease Modifications\n\n**Challenge:**\n- Accounting for lease modifications\n- Determining if modification is anticipated\n- Example: Lease extension negotiations\n\n**Solution:**\n- ASC 842 guidance on lease modifications\n- Modification accounting treatment\n- Example: Lease modification accounting\n\n## Section 3: Practical Expedients Available\n\n### Practical Expedient 1: Hindsight\n\n**Description:**\n- Use hindsight in determining lease term\n- Use hindsight in assessing renewal options\n- Example: Use actual lease term if known\n\n### Practical Expedient 2: Lease and Non-Lease Components\n\n**Description:**\n- Combine lease and non-lease components\n- Account as single lease\n- Example: Equipment lease + maintenance\n\n### Practical Expedient 3: Short-Term Leases\n\n**Description:**\n- Leases < 12 months\n- Optional exemption available\n- Example: 6-month equipment lease\n\n### Practical Expedient 4: Low-Value Assets\n\n**Description:**\n- Assets < $5,000\n- Optional exemption available\n- Example: Office furniture lease\n\n## Section 4: Case Study - US GAAP Specific Considerations\n\n### Company: USGAAPCorp\n\n### Issue 1: Lease vs. Service Contract\n\n**Arrangement: Cloud Computing Service**\n- Monthly payment: $10,000\n- Term: 3 years\n- Question: Lease or service contract?\n\n**Analysis:**\n- Does customer control the asset?\n- Can customer direct use of asset?\n- Example: Cloud service = service contract (not lease)\n\n**Accounting:**\n- Service expense: $10,000/month\n- No ROU asset or liability\n\n### Issue 2: Incremental Borrowing Rate\n\n**Lease Details:**\n- Equipment: Manufacturing equipment\n- Equipment cost: $500,000\n- Lease term: 5 years\n- Monthly payment: $10,000\n- Implicit rate: Unknown\n\n**Incremental Borrowing Rate Determination:**\n- Company credit rating: BBB\n- Market interest rate: 5%\n- Incremental borrowing rate: 5.5%\n\n**Lease Liability Calculation:**\n- Monthly payment: $10,000\n- Number of payments: 60\n- Monthly discount rate: 0.458% (5.5% / 12)\n- PV of payments: $10,000 \u00d7 53.8 = $538,000\n\n### Issue 3: Lease Term Determination\n\n**Lease Details:**\n- Equipment: Office equipment\n- Equipment cost: $100,000\n- Non-cancellable term: 3 years\n- Renewal option: 2 years at $2,000/month\n- Question: Is renewal option reasonably certain?\n\n**Analysis:**\n- Company history: Renewed similar leases\n- Equipment condition: Expected to be useful\n- Renewal cost: Below market rate\n- Conclusion: Renewal option reasonably certain\n\n**Lease Term:**\n- Non-cancellable term: 3 years\n- Renewal option: 2 years (reasonably certain)\n- Total lease term: 5 years\n\n### Issue 4: Lease Modification\n\n**Original Lease:**\n- Equipment: Manufacturing equipment\n- Lease term: 5 years\n- Monthly payment: $10,000\n- ROU asset: $500,000\n- Lease liability: $450,000\n\n**Lease Modification:**\n- Extension: 2-year extension\n- New monthly payment: $11,000\n- Modification date: Year 2\n\n**Modification Accounting:**\n- Remeasure lease liability\n- Adjust ROU asset\n- Example: Lease liability increases by $50,000");
  app.save(record2);
}, (app) => {
  // Rollback: record IDs not known, manual cleanup needed
})
