/// <reference path="../pb_data/types.d.ts" />
migrate((app) => {
  const collection = app.findCollectionByNameOrId("lesson_content");

  const record0 = new Record(collection);
    record0.set("lesson_id", "pbc_3963162141_3");
    record0.set("content_body", "Section 1: Lessee Recognition at Lease Commencement - At lease commencement, lessee recognizes ROU asset and lease liability. Recognition date is lease commencement date (when lessee has right to use asset). ROU Asset Recognition: Definition is lessee right to use leased asset, measured at cost. Components: Lease liability amount + Lease payments before commencement + Initial direct costs - Lease incentives received. Example: $450,000 + $0 + $5,000 - $0 = $455,000. Lease Liability Recognition: Definition is lessee obligation to pay lease payments, measured at present value. Components: Fixed lease payments + Variable payments + Residual value guarantees + Termination penalties. Example: $600,000 + $0 + $50,000 + $0 = $650,000. Section 2: ROU Asset Measurement - Formula: ROU Asset = Lease Liability + Initial Direct Costs - Lease Incentives + Prepaid Lease Payments. Components: Lease Liability (PV of lease payments, $450,000), Initial Direct Costs (costs to obtain lease, $5,000), Lease Incentives (payments by lessor, $0), Prepaid Lease Payments (payments before commencement, $0). Example calculation: Equipment lease with $500,000 cost, 5-year term, $10,000 monthly payment, $50,000 residual guarantee, 4% implicit rate. Lease Liability: Monthly payment $10,000 \u00d7 54.8 PV factor = $548,000, Residual guarantee $50,000 \u00d7 0.8219 = $41,096, Total $589,096. ROU Asset: $589,096 + $5,000 - $0 + $0 = $594,096. Section 3: Lease Liability Measurement - Formula: Lease Liability = PV of Lease Payments. Lease Payments Include: Fixed payments, Variable payments (linked to index/rate), Residual value guarantees, Termination penalties (if reasonably certain). Discount Rate Selection: Implicit Rate (equates PV to fair value, used when known, 4% example), Incremental Borrowing Rate (rate lessee would pay to borrow, used when implicit unknown, 5% example). Calculation Steps: Step 1 Identify Lease Payments ($600,000 fixed + $0 variable + $50,000 residual + $0 penalties = $650,000), Step 2 Select Discount Rate (4% implicit used when known), Step 3 Calculate PV ($10,000 \u00d7 54.8 = $548,000), Step 4 Calculate PV of Residual ($50,000 \u00d7 0.8219 = $41,096), Step 5 Total Liability ($548,000 + $41,096 = $589,096). Section 4: Initial Recognition Journal Entry - Debit ROU Asset $594,096, Credit Lease Liability $589,096, Credit Cash $5,000. Section 5: Case Study - LesseeRecognitionCorp with two leases: Manufacturing Equipment (ROU $594,096, Liability $589,096, Balance Sheet impact: Assets +$594,096, Liabilities +$589,096), Office Building (ROU $6,062,000, Liability $6,037,000, Balance Sheet impact: Assets +$6,062,000, Liabilities +$6,037,000).");
  app.save(record0);

  const record1 = new Record(collection);
    record1.set("lesson_id", "pbc_3963162141_4");
    record1.set("content_body", "Section 1: Subsequent Measurement of ROU Asset - ROU Asset Depreciation: Straight-line depreciation over lease term. Formula: Monthly Depreciation = ROU Asset / Lease Term (months). Example: $594,096 / 60 months = $9,902/month, Annual $118,824. Depreciation Journal Entry: Debit Depreciation Expense, Credit Accumulated Depreciation. ROU Asset Balance tracking: Year 1 ($594,096 - $118,824 = $475,272), Year 2 ($475,272 - $118,824 = $356,448), Year 3 ($356,448 - $118,824 = $237,624), Year 4 ($237,624 - $118,824 = $118,800), Year 5 ($118,800 - $118,800 = $0). Section 2: Subsequent Measurement of Lease Liability - Lease Liability Changes: Interest expense (accrual), Lease payment (reduction), Remeasurement (if modification). Interest Expense Calculation: Formula Monthly Interest = Lease Liability \u00d7 Monthly Discount Rate. Example: $589,096 \u00d7 0.3333% = $1,964/month, $23,556/year. Lease Payment Allocation: Monthly $10,000 = $1,964 interest + $8,036 principal. Lease Liability Balance tracking: Month 1 ($589,096 + $1,964 - $10,000 = $581,060), Month 2 ($581,060 + $1,937 - $10,000 = $572,997), Month 3 ($572,997 + $1,910 - $10,000 = $564,907). Year summaries: Year 1 ($589,096 + $23,556 - $120,000 = $492,652), Year 2 ($492,652 + $19,706 - $120,000 = $392,358), Year 3 ($392,358 + $15,694 - $120,000 = $288,052), Year 4 ($288,052 + $11,522 - $120,000 = $179,574), Year 5 ($179,574 + $7,183 - $120,000 - $50,000 = $16,757). Section 3: Lease Modifications - Definition: Change in scope or consideration not part of original terms. Examples: Extension of lease term, Reduction of lease term, Change in lease payments, Addition/Removal of asset. Modification Accounting: Step 1 Assess Modification Type, Step 2 Remeasure Lease Liability (recalculate PV), Step 3 Adjust ROU Asset, Step 4 Record Journal Entry. Example: Original 5-year lease extended 2 years, payment increases from $10,000 to $11,000. Remaining term 3 years + 2 extension = 5 years. New liability $650,000, Change $257,642. Journal Entry: Debit ROU Asset $257,642, Credit Lease Liability $257,642. Section 4: Case Study - SubsequentMeasurementCorp with Year 1 measurements (Depreciation $118,824, Interest $23,556, Payment $120,000, Total expense $142,380), Year 1 Balance Sheet (ROU asset net $475,272, Lease liability $492,652), Lease Modification at end of Year 2 (Extension 2 years, payment increase to $11,000, New liability $650,000, Change $257,642), Post-modification (ROU asset $614,090, Lease liability $650,000).");
  app.save(record1);

  const record2 = new Record(collection);
    record2.set("lesson_id", "pbc_3963162141_5");
    record2.set("content_body", "Section 1: Balance Sheet Presentation - ROU Asset Presentation: Separate line item (Operating Lease Right-of-Use Assets), Gross ROU asset less accumulated depreciation equals net ROU asset. Example: $594,096 - $118,824 = $475,272. Lease Liability Presentation: Separate line item (Operating Lease Liabilities), Current portion (due within 12 months) and Non-current portion (due after 12 months). Example: Current $120,000, Non-current $372,652. Section 2: Income Statement Presentation - Lease Expense Components: Operating Lease Expense = Depreciation of ROU asset + Interest on lease liability. Example: $118,824 + $23,556 = $142,380. Finance Lease Expense = Depreciation + Interest (same calculation). Presentation: Depreciation expense (operating expenses), Interest expense (financing costs), Separate line items. Section 3: Disclosure Requirements - Required Disclosures: (1) Lease Accounting Policies (lease definition, recognition/measurement policies), (2) ROU Asset and Lease Liability (gross ROU, accumulated depreciation, net ROU, current/non-current liability), (3) Lease Payments (future minimum payments by year for 5 years, total and present value), (4) Lease Expense (operating lease expense, finance lease expense, interest expense), (5) Lease Term and Discount Rate (weighted average lease term, weighted average discount rate), (6) Lease Modifications (significant modifications and impacts). Section 4: Case Study - DisclosureCorp with three leases: Manufacturing Equipment (ROU $594,096, Liability $589,096, 5-year term, $10,000/month), Office Building (ROU $6,062,000, Liability $6,037,000, 10-year term, $50,000/month), Vehicles (ROU $350,000, Liability $340,000, 3-year term, $10,000/month). Balance Sheet: ROU Assets $6,900,000 - Depreciation $450,000 = Net $6,450,000. Liabilities: Current $600,000, Non-current $6,366,096, Total $6,966,096. Income Statement: Depreciation $450,000, Interest $250,000, Total Expense $700,000. Disclosure Schedule: Future payments Year 1-3 $720,000 each, Year 4-5 $600,000 each, Total $3,360,000, Less Interest $394,000, Present Value $2,966,096. Lease Accounting Policies: Recognized at commencement, ROU asset = liability + initial costs, Liability = PV of payments, Discount rate = implicit or incremental borrowing rate.");
  app.save(record2);
}, (app) => {
  // Rollback: record IDs not known, manual cleanup needed
})
