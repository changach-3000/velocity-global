/// <reference path="../pb_data/types.d.ts" />
migrate((app) => {
  const collection = app.findCollectionByNameOrId("lesson_content");

  const record0 = new Record(collection);
    record0.set("lesson_id", "pbc_3963162141_6");
    record0.set("content_body", "Section 1: Lessor Lease Classification - ASC 842 requires lessors to classify leases as Finance leases or Operating leases. Classification Criteria: A lease is Finance Lease if (1) Lease transfers ownership, (2) Lease contains purchase option reasonably certain to exercise, (3) Lease term \u226575% of asset economic life, (4) PV of lease payments \u226590% of asset fair value, (5) Asset is specialized with no alternative use. If any criterion met = Finance Lease, if no criterion met = Operating Lease. Example: 5-year lease, 7-year asset life (71% not \u226575%), PV $543,000 / FV $500,000 = 109% (\u226590%) = Finance Lease. Section 2: Finance Lease Accounting (Lessor) - Definition: Lease that transfers substantially all risks and rewards of asset ownership to lessee. Recognition: At commencement, derecognize underlying asset, recognize lease receivable, recognize gain/loss. Measurement: Lease Receivable = PV of lease payments + Residual value guarantee. Example: $548,000 + $41,096 = $589,096. Subsequent Measurement: Interest Income calculated on lease receivable balance using implicit rate. Example: $589,096 \u00d7 4% = $23,564. Lease Receivable reduced by lease payments. Finance Lease Example: Manufacturing equipment, $500,000 cost/FV, 5-year term, $10,000/month, $50,000 residual, 4% implicit. Classification: 71% of life (not \u226575%), 109% of FV (\u226590%) = Finance Lease. Lessor Accounting: Debit Lease Receivable $589,096, Credit Equipment $500,000, Credit Gain $89,096. Year 1: Interest income $23,564, Payments $120,000, Receivable reduction $96,436, Ending $492,660. Section 3: Operating Lease Accounting (Lessor) - Definition: Lease that does not transfer substantially all risks and rewards. Recognition: Retain underlying asset, no lease receivable. Measurement: Asset measured at cost, depreciated over useful life. Example: $500,000 equipment. Subsequent Measurement: Straight-line depreciation over asset useful life. Example: $500,000 / 7 years = $71,429/year. Lease Income recognized straight-line over lease term. Example: $120,000 / 5 years = $24,000/year. Operating Lease Example: Office equipment, $100,000 cost, 10-year life, 2-year lease, $4,500/month, 6% implicit. Classification: 20% of life (not \u226575%), 104% of FV (\u226590%) = Operating Lease. Lessor Accounting: Equipment retained $100,000, no lease receivable. Year 1: Depreciation $10,000, Lease income $54,000, Net income $44,000. Section 4: Case Study - LessorAccountingCorp with two leases: Finance Lease (Manufacturing equipment, $500,000 cost/FV, 5-year, $10,000/month, $50,000 residual, 4% implicit, 71% of life, 109% of FV = Finance, Debit Receivable $589,096, Credit Equipment $500,000, Credit Gain $89,096, Year 1 Interest $23,564, Payments $120,000, Receivable reduction $96,436, Ending $492,660), Operating Lease (Office equipment, $100,000 cost, 10-year life, 2-year, $4,500/month, 6% implicit, 20% of life, 104% of FV = Operating, Equipment retained $100,000, Year 1 Depreciation $10,000, Lease income $54,000, Net income $44,000).");
  app.save(record0);

  const record1 = new Record(collection);
    record1.set("lesson_id", "pbc_3963162141_7");
    record1.set("content_body", "Section 1: Implementation Planning - Implementation Phases: Phase 1 Assessment (Weeks 1-4, identify all leases, assess current accounting, identify gaps, deliverable lease inventory), Phase 2 Design (Weeks 5-8, design new processes, develop policies, design system changes, deliverable accounting policies and system design), Phase 3 Build (Weeks 9-16, build system changes, develop tools, train team, deliverable systems and trained team), Phase 4 Test (Weeks 17-20, test entries, test functionality, test disclosures, deliverable test results and fixes), Phase 5 Transition (Weeks 21-24, record transition entries, implement new accounting, prepare statements, deliverable transition entries and statements), Phase 6 Close-out (Weeks 25-26, final review, document procedures, finalize disclosures, deliverable audited statements). Section 2: Lease Identification and Inventory - Lease Identification: Step 1 Identify Contracts (review all contracts, identify potential leases), Step 2 Assess Lease Criteria (does contract convey right to use asset, is there consideration), Step 3 Document Lease Terms (lease term, payments, residual value), Step 4 Create Lease Inventory (list all leases, document key terms). Lease Inventory Components: For each lease document Lease ID, Asset description, Lease term, Monthly payment, Residual value, Implicit rate, Incremental borrowing rate. Example: Lease 001, Manufacturing equipment, 5 years, $10K/month, $50K residual. Section 3: Accounting Policy Development - Accounting Policy Components: (1) Lease Definition (how company defines lease), (2) Recognition Policy (when leases recognized), (3) Measurement Policy (how leases measured), (4) Discount Rate Policy (how discount rate determined), (5) Short-term and Low-Value Lease Policy (treatment of short-term and low-value leases), (6) Lease Modification Policy (how modifications treated), (7) Presentation and Disclosure Policy (how leases presented). Section 4: Transition Approaches - Modified Retrospective: Recognize cumulative effect at transition date, do not restate prior periods. Transition Entry: Debit ROU Asset, Credit Lease Liability, Credit Retained Earnings. Full Retrospective: Restate all prior periods, apply ASC 842 to all periods presented. Transition Entry: Debit ROU Asset, Credit Lease Liability, Credit Retained Earnings. Section 5: Case Study - ImplementationCorp with 100 leases, current state (operating vs finance distinction, many operating leases off-balance sheet, limited expertise). Implementation Plan: Phase 1 identify 100 leases, Phase 2 develop policies and system design, Phase 3 build systems and train team, Phase 4 test 10 sample leases, Phase 5 record transition entries for all 100, Phase 6 final review and audit. Transition Entries: Lease 1 Finance (old $500K asset $450K debt, new $500K ROU $450K liability, no entry already on balance sheet), Lease 2 Operating (old $120K/year expense, new $500K ROU $450K liability, Debit ROU $500K, Credit Liability $450K, Credit Retained Earnings $50K), Lease 3 Vehicle Operating (old $60K/year, new $200K ROU $180K liability, Debit ROU $200K, Credit Liability $180K, Credit Retained Earnings $20K). Financial Statement Impact: Balance Sheet assets increase $50M, liabilities increase $45M, equity $5M. Income Statement Year 1: Lease expense changes, operating leases now depreciation + interest, total $5.5M (vs $5M), net income impact -$0.5M.");
  app.save(record1);

  const record2 = new Record(collection);
    record2.set("lesson_id", "pbc_3963162141_8");
    record2.set("content_body", "Section 1: Practical Expedients - Practical Expedient 1 Hindsight: Use hindsight in determining lease term, assessing renewal options, assessing termination penalties. Application: Lease term determination, renewal option assessment, termination penalty assessment. Example: If lease extended, use extended term. Practical Expedient 2 Lease and Non-Lease Components: Combine lease and non-lease components, account as single lease. Application: Equipment lease + maintenance, Building lease + property management. Example: Combined accounting. Practical Expedient 3 Short-Term Leases: Leases <12 months, optional exemption available, lessee can elect not to recognize ROU asset/liability. Application: Recognize lease expense, no ROU asset or liability. Example: 6-month equipment lease. Practical Expedient 4 Low-Value Assets: Assets <$5,000, optional exemption available, lessee can elect not to recognize ROU asset/liability. Application: Recognize lease expense, no ROU asset or liability. Example: Office furniture lease. Section 2: Special Lease Topics - Topic 1 Lease vs Service Contract: Challenge distinguishing leases from service contracts, determining control. Solution: ASC 842 guidance on lease definition, control assessment framework. Example: Cloud computing lease vs service analysis. Topic 2 Variable Lease Payments: Definition payments that vary based on index or rate. Accounting: Included in lease liability if linked to index/rate, not included if contingent on performance. Example: Index-linked payments included. Topic 3 Residual Value Guarantees: Definition lessee guarantees residual value, included in lease payments. Accounting: Included in lease liability, measured at PV. Example: $50,000 guarantee, PV $41,096. Topic 4 Lease Incentives: Definition payments by lessor to lessee, reduces ROU asset. Accounting: Reduces ROU asset. Example: Free rent period, lessor-paid improvements. Section 3: Case Study - PracticalExpedientsCorp with six leases: Lease 1 Short-Term Equipment (6-month, $1,000/month, $6,000 total, Short-term exemption applied, Recognize expense $6,000, no ROU/liability), Lease 2 Low-Value Furniture ($3,000 value, 3-year, $100/month, $3,600 total, Low-value exemption applied, Recognize expense $3,600, no ROU/liability), Lease 3 Equipment with Maintenance ($500,000 equipment, 5-year, $9,000 equipment + $1,000 maintenance = $10,000/month, Lease and non-lease components combined, ROU $594,096, Liability $589,096, includes both), Lease 4 Variable Payments ($500,000 equipment, 5-year, $8,000 fixed + $2,000 variable linked to inflation, Fixed and variable included in liability), Lease 5 Residual Guarantee ($500,000 equipment, 5-year, $10,000/month, $50,000 residual guarantee, Fixed $600,000 + Residual $50,000 = $650,000 total, Liability $589,096), Lease 6 Lease Incentive ($500,000 equipment, 5-year, $10,000/month, $25,000 lessor-paid improvement incentive, Liability $589,096, Incentive ($25,000), ROU $564,096).");
  app.save(record2);
}, (app) => {
  // Rollback: record IDs not known, manual cleanup needed
})
